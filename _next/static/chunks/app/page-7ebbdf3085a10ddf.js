(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5628:function(t,e,a){Promise.resolve().then(a.bind(a,4522))},4522:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return r}});var i=a(7437),o=a(2265);class n{async loadConfig(){if(this.config)return this.config;try{let t=await fetch(this.configPath);if(!t.ok)throw Error("Please import config.json file");return this.config=await t.json(),this.config}catch(t){throw Error("An error occurred while loading config: ".concat(t.message))}}checkHostname(t,e){return new URL(t).hostname===e}getFetchUrl(t,e){if(!this.isValidUrl(t))return"".concat(this.baseAPIUrl).concat(e);if(!this.checkHostname(t,this.host))throw Error("The link is not valid. Expected host is "+this.host+".");return t}isValidUrl(t){try{return new URL(t),!0}catch(t){return!1}}async fetchData(){let t;if(t=this.queryParams.get("s")){let e=await this.fetchDataByKey(t,"s");return e.data.downloadLink?await this.fetchDownloadData(e.data.downloadLink):e.data}if(t=this.queryParams.get("key")){let e=await this.fetchDataByKey(t,"key");return e.data.downloadLink?await this.fetchDownloadData(e.data.downloadLink):e.data}if(t=this.queryParams.get("link")){if(!this.checkHostname(t,this.host))throw Error("Unauthorized host. The link is not valid.");let e=await this.fetchDataByKey(t,"link");return e.data.downloadLink?await this.fetchDownloadData(e.data.downloadLink):e.data}let e=await this.loadConfig();if(t=e.s){let e=await this.fetchDataByKey(t,"s");return e.data.downloadLink?await this.fetchDownloadData(e.data.downloadLink):e.data}if(t=e.key){let e=await this.fetchDataByKey(t,"key");return e.data.downloadLink?await this.fetchDownloadData(e.data.downloadLink):e.data}if(t=e.link){if(!this.checkHostname(t,this.host))throw Error("Unauthorized host. The link is not valid.");let e=await this.fetchDataByKey(t,"link");return e.data.downloadLink?await this.fetchDownloadData(e.data.downloadLink):e.data}throw Error("No valid key found. Please provide a valid key or import the config.json file.")}async fetchDataByKey(t){let e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=this.getFetchUrl(t,a);if("s"===a||"key"===a){console.log("fetchDataByKey",a,t);let o={origin:this.origin,[a]:t,themeCode:this.themeCode,themeVersion:this.themeVersion};e=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})}else e=await fetch(i);if(!e.ok){let t=await e.json();throw Error("".concat(t.error||e.statusText))}return await e.json()}async fetchDownloadData(t){let e=await fetch(t);if(!e.ok){let t=await e.json();throw Error("".concat(t.message||e.statusText))}return(await e.json()).data}constructor(t="./config.json"){var e,a;this.configPath=t,this.config=null,this.queryParams=new URLSearchParams(window.location.search),this.baseAPIUrl="http://192.168.1.4:4002/api/v1/web/",this.host="192.168.1.4",this.origin=window.location.href,this.themeCode=(null===(e=document.querySelector('meta[name="theme-code"]'))||void 0===e?void 0:e.content)||null,this.themeVersion=(null===(a=document.querySelector('meta[name="theme-version"]'))||void 0===a?void 0:a.content)||null}}function r(){let[t,e]=(0,o.useState)(null),[a,r]=(0,o.useState)(null);return(0,o.useEffect)(()=>{new n().fetchData().then(t=>{e(t)}).catch(t=>{console.log("error",t),r(t.message)})},[]),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"bg-green-500",children:"Welcome to the Next.js SDK Example"}),a?(0,i.jsxs)("p",{children:["Error: ",a]}):t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("pre",{children:JSON.stringify(t,null,2)}),(0,i.jsxs)("h1",{children:[" sdf ",t.web.p.about.fullname]}),(0,i.jsx)("div",{className:" w-44 h-44",children:(0,i.jsx)("img",{src:t.web.p.about.profile,alt:"Cropped",className:"  object-cover rounded-full "})}),(0,i.jsx)("img",{href:t.web.p.about.profile})]}):(0,i.jsx)("p",{children:"Loading..."}),(0,i.jsx)("button",{id:"loginBtn",children:"Login to Panel"}),(0,i.jsx)("button",{id:"supportBtn",children:"Support"})]})}}},function(t){t.O(0,[971,23,744],function(){return t(t.s=5628)}),_N_E=t.O()}]);